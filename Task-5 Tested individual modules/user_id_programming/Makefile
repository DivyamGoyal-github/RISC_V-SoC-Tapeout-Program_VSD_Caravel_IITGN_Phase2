# ============================================================
# Makefile : user_id_programming testbench (Synopsys VCS)
# ============================================================

# ------------------------------------------------------------
# Tools
# ------------------------------------------------------------
VCS      = vcs
SIMV     = simv
GTKWAVE  = gtkwave

# ------------------------------------------------------------
# Source files
# ------------------------------------------------------------
RTL      = user_id_programming.v
TB       = user_id_programming_tb.v
DUMMY    = dummy_scl180_conb_1.v

# ------------------------------------------------------------
# VCS flags
# ------------------------------------------------------------
VCS_FLAGS = -full64 -sverilog \
            -debug_access+all \
            -timescale=1ns/1ps

# ------------------------------------------------------------
# Default target
# ------------------------------------------------------------
all: sim run

# ------------------------------------------------------------
# Compile
# ------------------------------------------------------------
sim: $(RTL) $(TB) $(DUMMY)
	$(VCS) $(VCS_FLAGS) \
		$(RTL) $(DUMMY) $(TB) \
		-o $(SIMV)

# ------------------------------------------------------------
# Run simulation
# ------------------------------------------------------------
run:
	./$(SIMV)

# ------------------------------------------------------------
# View waveform
# ------------------------------------------------------------
wave:
	$(GTKWAVE) user_id_programming.vcd &

# ------------------------------------------------------------
# Clean
# ------------------------------------------------------------
clean:
	rm -rf $(SIMV) simv.daidir csrc \
	       ucli.key *.vcd *.vpd

.PHONY: all sim run wave clean

